\hypertarget{thread_pool_8h_source}{}\doxysection{thread\+Pool.\+h}
\label{thread_pool_8h_source}\index{code/threadPool.h@{code/threadPool.h}}
\mbox{\hyperlink{thread_pool_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{9 \textcolor{preprocessor}{\#ifndef \_THREADPOOL\_}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#define \_THREADPOOL\_}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <atomic>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <condition\_variable>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <deque>}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <thread>}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include <functional>}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#include <mutex>}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#if GRAPHICS\_API == OPENGL}}
\DoxyCodeLine{19 }
\DoxyCodeLine{20 \textcolor{preprocessor}{\#include <glm.hpp>}}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{23 }
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \textcolor{keyword}{namespace }VoxelEng \{}
\DoxyCodeLine{26 }
\DoxyCodeLine{33     \textcolor{keyword}{class }\mbox{\hyperlink{class_voxel_eng_1_1job}{job}} \{}
\DoxyCodeLine{34 }
\DoxyCodeLine{35     \textcolor{keyword}{public}:}
\DoxyCodeLine{36 }
\DoxyCodeLine{41         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_voxel_eng_1_1job_a503e66312bb141b8894b6b13586ebc4c}{process}}() = 0;}
\DoxyCodeLine{42 }
\DoxyCodeLine{43     \textcolor{keyword}{private}:}
\DoxyCodeLine{44 }
\DoxyCodeLine{45     \};}
\DoxyCodeLine{46 }
\DoxyCodeLine{52     \textcolor{keyword}{class }\mbox{\hyperlink{class_voxel_eng_1_1thread_pool}{threadPool}} \{}
\DoxyCodeLine{53 }
\DoxyCodeLine{54     \textcolor{keyword}{public}:}
\DoxyCodeLine{55 }
\DoxyCodeLine{56         \textcolor{comment}{// Constructors.}}
\DoxyCodeLine{57 }
\DoxyCodeLine{61         \mbox{\hyperlink{class_voxel_eng_1_1thread_pool}{threadPool}}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} nThreads);}
\DoxyCodeLine{62 }
\DoxyCodeLine{63 }
\DoxyCodeLine{64         \textcolor{comment}{// Modifiers.}}
\DoxyCodeLine{65 }
\DoxyCodeLine{72         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_voxel_eng_1_1thread_pool_aa8edb61bd1cfcd9edba1a0c141aa9fee}{waitForTask}}();}
\DoxyCodeLine{73 }
\DoxyCodeLine{78         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_voxel_eng_1_1thread_pool_ac6fc36ca7318e43b09417760e466393e}{submitJob}}(\mbox{\hyperlink{class_voxel_eng_1_1job}{job}}* \mbox{\hyperlink{class_voxel_eng_1_1job}{job}});}
\DoxyCodeLine{79 }
\DoxyCodeLine{83         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_voxel_eng_1_1thread_pool_a6a997e73c30360a368aaac8f28da15e6}{shutdown}}();}
\DoxyCodeLine{84 }
\DoxyCodeLine{88         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_voxel_eng_1_1thread_pool_a7d447df970571daf226d813e9acb8f03}{awaitNoJobs}}();}
\DoxyCodeLine{89 }
\DoxyCodeLine{96         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_voxel_eng_1_1thread_pool_af7c3b4ced40ef03ab8393ac7a0401e41}{awaitTermination}}();}
\DoxyCodeLine{97 }
\DoxyCodeLine{101         \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_voxel_eng_1_1thread_pool_a920fca8a41774821b3f7c1d68b6691d0}{terminated}}() \textcolor{keyword}{const};}
\DoxyCodeLine{102 }
\DoxyCodeLine{103 }
\DoxyCodeLine{104         \textcolor{comment}{// Destructors.}}
\DoxyCodeLine{105 }
\DoxyCodeLine{109         \mbox{\hyperlink{class_voxel_eng_1_1thread_pool_a834e3b40eb8c8bb72cae6f5aa6af4cbc}{\string~threadPool}}();}
\DoxyCodeLine{110 }
\DoxyCodeLine{111     \textcolor{keyword}{private}:}
\DoxyCodeLine{112 }
\DoxyCodeLine{113         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} nThreads\_;}
\DoxyCodeLine{114         std::mutex jobsMutex\_,}
\DoxyCodeLine{115                    callerMutex\_;}
\DoxyCodeLine{116         std::condition\_variable jobsAvailable\_,}
\DoxyCodeLine{117                                 callerCV\_;}
\DoxyCodeLine{118         std::atomic<bool> shutdown\_,}
\DoxyCodeLine{119                           terminated\_;}
\DoxyCodeLine{120         std::atomic<unsigned int> nWorkingThreads\_;}
\DoxyCodeLine{121         std::vector<std::thread> pool\_;}
\DoxyCodeLine{122         std::deque<job*> jobs\_;}
\DoxyCodeLine{123     }
\DoxyCodeLine{124     \};}
\DoxyCodeLine{125 }
\DoxyCodeLine{126     \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_voxel_eng_1_1thread_pool_a920fca8a41774821b3f7c1d68b6691d0}{threadPool::terminated}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{127 }
\DoxyCodeLine{128         \textcolor{keywordflow}{return} terminated\_;}
\DoxyCodeLine{129 }
\DoxyCodeLine{130     \}}
\DoxyCodeLine{131 }
\DoxyCodeLine{132 \}}
\DoxyCodeLine{133 }
\DoxyCodeLine{134 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
